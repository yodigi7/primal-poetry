import{y as A,h as o,z as I,E as N,H as R,A as m,B as D,C as h,D as v,F as g,G as p,I as F,U as L,n as b,d as S,J as k,K as x,f as C,L as H}from"./runtime.D0LUdKCG.js";function w(s,n,a=!1){o&&I();var e=s,r=null,u=null,i=L,y=a?N:0,c=!1;const E=(l,t=!0)=>{c=!0,_(t,l)},_=(l,t)=>{if(i===(i=l))return;let d=!1;if(o){const T=e.data===R;!!i===T&&(e=m(),D(e),h(!1),d=!0)}i?(r?v(r):t&&(r=g(()=>t(e))),u&&p(u,()=>{u=null})):(u?v(u):t&&(u=g(()=>t(e))),r&&p(r,()=>{r=null})),d&&h(!0)};A(()=>{c=!1,n(E),c||_(null,null)},y),o&&(e=F)}function U(s,n,a){if(s==null)return n(void 0),b;const e=S(()=>s.subscribe(n,a));return e.unsubscribe?()=>e.unsubscribe():e}let f=!1;function z(s,n,a){const e=a[n]??(a[n]={store:null,source:x(void 0),unsubscribe:b});if(e.store!==s)if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=b;else{var r=!0;e.unsubscribe=U(s,u=>{r?e.source.v=u:H(e.source,u)}),r=!1}return C(e.source)}function B(){const s={};return k(()=>{for(var n in s)s[n].unsubscribe()}),s}function G(s){var n=f;try{return f=!1,[s(),f]}finally{f=n}}export{z as a,G as c,w as i,B as s};
